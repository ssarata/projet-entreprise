
generator client {
  provider = "prisma-client-js"
  
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}


//table User
model User {
  id       Int       @id @default(autoincrement())
  email    String    @unique
  password String
  personne  Personne @relation(fields: [id], references: [id])//user herite de personne
  documents Document[]//un utlisateur peut generer plusieurs documents
}

//table Personne
model Personne {
  id       Int       @id @default(autoincrement())
  nom      String
  prenom   String
  profession   String?
  adresse    String?
  telephone      String?
  dateNaissance   String?
  nationalite   String?
  numeroCni   String?
  sexe      String?
  lieuNaissance   String?
 // role    String?
  user     User?
  documents DocumentPersonne[]

}

//table DocumentTemplate
model DocumentTemplate {
  id       Int       @id @default(autoincrement())
  content  String
  typeDocument  String
  variables Variable[]
  documents Document[]///
}
//table Variable
model Variable {
  id            Int               @id @default(autoincrement())
  nomVariable          String
  template      DocumentTemplate  @relation(fields: [templateId], references: [id])
  templateId    Int
}

//table Document
model Document {
  id            Int               @id @default(autoincrement())
  date          DateTime
  identiteDuMaire          String
  template      DocumentTemplate? @relation(fields: [templateId], references: [id])
  templateId    Int?
  personnes     DocumentPersonne[]
  user     User      @relation(fields: [userId], references: [id])//un document est generer par un et un seul user
  userId   Int
}

model DocumentPersonne {
  id          Int       @id @default(autoincrement())
  fonction    String
  document    Document  @relation(fields: [documentId], references: [id])
  documentId  Int
  personne    Personne  @relation(fields: [personneId], references: [id])
  personneId  Int
}

model Mairie{
id          Int       @id @default(autoincrement())
ville    String
commune    String
logo    String
region    String
prefecture    String






}

